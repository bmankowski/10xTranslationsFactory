---
import Layout from "../../layouts/Layout.astro";
import { NewPasswordForm } from "../../components/auth/NewPasswordForm";
import { AuthFormLayout } from "../../components/auth/AuthFormLayout";
import { AuthError } from "../../components/auth/AuthError";

// Set to SSR mode to ensure it's always rendered on the server
export const prerender = false;

// In a real implementation, we'd validate the token here
const tokenValid = true;
const error = tokenValid ? "" : "Invalid or expired password reset link. Please request a new one.";
---

<Layout title="Create New Password">
  <main class="flex flex-col items-center justify-center min-h-screen py-12 bg-background">
    <AuthFormLayout 
      title="Create New Password" 
      description="Enter a new password for your account"
      client:load
    >
      {error && <AuthError message={error} client:load />}
      
      {!error && (
        <NewPasswordForm 
          onSubmit={(data) => {
            // This is a client-side prop that will be replaced with actual implementation
            // We're only defining the UI here
            return Promise.resolve();
          }}
          client:load
        />
      )}
    </AuthFormLayout>
  </main>
</Layout> 